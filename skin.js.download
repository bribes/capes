const TAU=2*Math.PI,EPSILON=.001,skinLayout=[{head:[{l:{x:16,y:8,w:8,h:8},r:{x:0,y:8,w:8,h:8},u:{x:8,y:0,w:8,h:8},d:{x:16,y:7,w:8,h:-8},f:{x:8,y:8,w:8,h:8},b:{x:24,y:8,w:8,h:8}},{l:{x:48,y:8,w:8,h:8},r:{x:32,y:8,w:8,h:8},u:{x:40,y:0,w:8,h:8},d:{x:48,y:7,w:8,h:-8},f:{x:40,y:8,w:8,h:8},b:{x:56,y:8,w:8,h:8}}],torso:[{l:{x:28,y:20,w:4,h:12},r:{x:16,y:20,w:4,h:12},u:{x:20,y:16,w:8,h:4},d:{x:28,y:19,w:8,h:-4},f:{x:20,y:20,w:8,h:12},b:{x:32,y:20,w:8,h:12}}],armR:[{l:{x:48,y:20,w:4,h:12},r:{x:40,y:20,w:4,h:12},u:{x:44,y:16,w:4,h:4},d:{x:48,y:19,w:4,h:-4},f:{x:44,y:20,w:4,h:12},b:{x:52,y:20,w:4,h:12}}],armRS:[{l:{x:47,y:20,w:4,h:12},r:{x:40,y:20,w:4,h:12},u:{x:44,y:16,w:3,h:4},d:{x:47,y:19,w:3,h:-4},f:{x:44,y:20,w:3,h:12},b:{x:51,y:20,w:3,h:12}}],armL:[{l:{x:43,y:20,w:-4,h:12},r:{x:51,y:20,w:-4,h:12},u:{x:47,y:16,w:-4,h:4},d:{x:51,y:19,w:-4,h:-4},f:{x:47,y:20,w:-4,h:12},b:{x:55,y:20,w:-4,h:12}}],armLS:[{l:{x:43,y:20,w:-4,h:12},r:{x:50,y:20,w:-4,h:12},u:{x:46,y:16,w:-3,h:4},d:{x:49,y:19,w:-3,h:-4},f:{x:46,y:20,w:-3,h:12},b:{x:53,y:20,w:-3,h:12}}],legR:[{l:{x:8,y:20,w:4,h:12},r:{x:0,y:20,w:4,h:12},u:{x:4,y:16,w:4,h:4},d:{x:8,y:19,w:4,h:-4},f:{x:4,y:20,w:4,h:12},b:{x:12,y:20,w:4,h:12}}],legL:[{l:{x:3,y:20,w:-4,h:12},r:{x:11,y:20,w:-4,h:12},u:{x:7,y:16,w:-4,h:4},d:{x:11,y:19,w:-4,h:-4},f:{x:7,y:20,w:-4,h:12},b:{x:15,y:20,w:-4,h:12}}]},{head:[{l:{x:16,y:8,w:8,h:8},r:{x:0,y:8,w:8,h:8},u:{x:8,y:0,w:8,h:8},d:{x:16,y:7,w:8,h:-8},f:{x:8,y:8,w:8,h:8},b:{x:24,y:8,w:8,h:8}},{l:{x:48,y:8,w:8,h:8},r:{x:32,y:8,w:8,h:8},u:{x:40,y:0,w:8,h:8},d:{x:48,y:7,w:8,h:-8},f:{x:40,y:8,w:8,h:8},b:{x:56,y:8,w:8,h:8}}],torso:[{l:{x:28,y:20,w:4,h:12},r:{x:16,y:20,w:4,h:12},u:{x:20,y:16,w:8,h:4},d:{x:28,y:19,w:8,h:-4},f:{x:20,y:20,w:8,h:12},b:{x:32,y:20,w:8,h:12}},{l:{x:28,y:36,w:4,h:12},r:{x:16,y:36,w:4,h:12},u:{x:20,y:32,w:8,h:4},d:{x:28,y:35,w:8,h:-4},f:{x:20,y:36,w:8,h:12},b:{x:32,y:36,w:8,h:12}}],armR:[{l:{x:48,y:20,w:4,h:12},r:{x:40,y:20,w:4,h:12},u:{x:44,y:16,w:4,h:4},d:{x:48,y:19,w:4,h:-4},f:{x:44,y:20,w:4,h:12},b:{x:52,y:20,w:4,h:12}},{l:{x:48,y:36,w:4,h:12},r:{x:40,y:36,w:4,h:12},u:{x:44,y:32,w:4,h:4},d:{x:48,y:35,w:4,h:-4},f:{x:44,y:36,w:4,h:12},b:{x:52,y:36,w:4,h:12}}],armRS:[{l:{x:47,y:20,w:4,h:12},r:{x:40,y:20,w:4,h:12},u:{x:44,y:16,w:3,h:4},d:{x:47,y:19,w:3,h:-4},f:{x:44,y:20,w:3,h:12},b:{x:51,y:20,w:3,h:12}},{l:{x:47,y:36,w:4,h:12},r:{x:40,y:36,w:4,h:12},u:{x:44,y:32,w:3,h:4},d:{x:47,y:35,w:3,h:-4},f:{x:44,y:36,w:3,h:12},b:{x:51,y:36,w:3,h:12}}],armL:[{l:{x:40,y:52,w:4,h:12},r:{x:32,y:52,w:4,h:12},u:{x:36,y:48,w:4,h:4},d:{x:40,y:51,w:4,h:-4},f:{x:36,y:52,w:4,h:12},b:{x:44,y:52,w:4,h:12}},{l:{x:56,y:52,w:4,h:12},r:{x:48,y:52,w:4,h:12},u:{x:52,y:48,w:4,h:4},d:{x:56,y:51,w:4,h:-4},f:{x:52,y:52,w:4,h:12},b:{x:60,y:52,w:4,h:12}}],armLS:[{l:{x:39,y:52,w:4,h:12},r:{x:32,y:52,w:4,h:12},u:{x:36,y:48,w:3,h:4},d:{x:39,y:51,w:3,h:-4},f:{x:36,y:52,w:3,h:12},b:{x:43,y:52,w:3,h:12}},{l:{x:55,y:52,w:4,h:12},r:{x:48,y:52,w:4,h:12},u:{x:52,y:48,w:3,h:4},d:{x:55,y:51,w:3,h:-4},f:{x:52,y:52,w:3,h:12},b:{x:59,y:52,w:3,h:12}}],legR:[{l:{x:8,y:20,w:4,h:12},r:{x:0,y:20,w:4,h:12},u:{x:4,y:16,w:4,h:4},d:{x:8,y:19,w:4,h:-4},f:{x:4,y:20,w:4,h:12},b:{x:12,y:20,w:4,h:12}},{l:{x:8,y:36,w:4,h:12},r:{x:0,y:36,w:4,h:12},u:{x:4,y:32,w:4,h:4},d:{x:8,y:35,w:4,h:-4},f:{x:4,y:36,w:4,h:12},b:{x:12,y:36,w:4,h:12}}],legL:[{l:{x:24,y:52,w:4,h:12},r:{x:16,y:52,w:4,h:12},u:{x:20,y:48,w:4,h:4},d:{x:24,y:51,w:4,h:-4},f:{x:20,y:52,w:4,h:12},b:{x:28,y:52,w:4,h:12}},{l:{x:8,y:52,w:4,h:12},r:{x:0,y:52,w:4,h:12},u:{x:4,y:48,w:4,h:4},d:{x:8,y:51,w:4,h:-4},f:{x:4,y:52,w:4,h:12},b:{x:12,y:52,w:4,h:12}}]}];function radians(e){return e*(TAU/360)}function textureUrl(e){return"https://texture.namemc.com/"+e[0]+e[1]+"/"+e[2]+e[3]+"/"+e+".png"}function toCanvas(e,t,a,n,r){t=void 0===t?0:t,a=void 0===a?0:a,n=void 0===n?e.width:n,r=void 0===r?e.height:r;let o=document.createElement("canvas");return o.width=n,o.height=r,o.getContext("2d").drawImage(e,t,a,n,r,0,0,n,r),o}function makeOpaque(e){let t=toCanvas(e),a=t.getContext("2d"),n=a.getImageData(0,0,t.width,t.height),r=n.data;for(let e=3;e<r.length;e+=4)r[e]=255;return a.putImageData(n,0,0),t}function hasAlphaLayer(e){let t=toCanvas(e),a=t.getContext("2d").getImageData(0,0,t.width,t.height).data;for(let e=3;e<a.length;e+=4)if(255!==a[e])return!0;return!1}function capeScale(e){return e%22==0?e/22:e%17==0?e/17:e>=32&&0==(e&e-1)?e/32:Math.max(1,Math.floor(e/22))}function drawSkin2D(){$("canvas.skin-2d").each(function(e,t){let a=textureUrl(t.getAttribute("data-skin-hash")),n="true"===t.getAttribute("data-flip"),r=new Image;r.crossOrigin="",r.src=a,r.onload=function(){let e=makeOpaque(r),a=t.getContext("2d");a.mozImageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1,a.msImageSmoothingEnabled=!1,a.imageSmoothingEnabled=!1,n&&(a.translate(t.width,t.height),a.scale(-1,-1)),a.drawImage(e,8,8,8,8,0,0,t.width,t.height),hasAlphaLayer(r)&&a.drawImage(r,40,8,8,8,0,0,t.width,t.height)},r.onerror=function(){console.error("Error loading "+r.src)}}),$("canvas.cape-2d").each(function(e,t){let a=textureUrl(t.getAttribute("data-cape-hash")),n="true"===t.getAttribute("data-flip"),r=new Image;r.crossOrigin="",r.src=a,r.onload=function(){let e=r?capeScale(r.height):null,a=makeOpaque(r),o=t.getContext("2d");o.mozImageSmoothingEnabled=!1,o.webkitImageSmoothingEnabled=!1,o.msImageSmoothingEnabled=!1,o.imageSmoothingEnabled=!1,n&&(o.translate(t.width,t.height),o.scale(-1,-1)),o.drawImage(a,e,e,10*e,16*e,0,0,t.width,t.height)},r.onerror=function(){console.error("Error loading "+r.src)}})}function colorFaces(e,t,a){if(!a)return null;let n=t.getContext("2d").getImageData(0,0,t.width,t.height).data,r=0,o=[],d=[],i={},h=THREE.FrontSide;return Object.keys(a).forEach(function(s){let l=a[s],c=Math.abs(l.w),w=Math.abs(l.h),m=Math.sign(l.w),y=Math.sign(l.h);for(let a=0,s=l.y;a<w;a++,s+=y)for(let a=0,w=l.x;a<c;a++,w+=m,r+=2){let a=4*(s*t.width+w),l=n[a+3];if(0===l){h=THREE.DoubleSide;continue}let c=i[l];void 0===c&&(d.push(new THREE.MeshLambertMaterial({vertexColors:THREE.FaceColors,opacity:l/255,transparent:255!==l})),c=d.length-1,i[l]=c,255!==l&&(h=THREE.DoubleSide));let m=e.faces[r],y=e.faces[r+1];m.color.r=n[a]/255,m.color.g=n[a+1]/255,m.color.b=n[a+2]/255,y.color=m.color,m.materialIndex=c,y.materialIndex=c,o.push(m),o.push(y)}}),0===o.length?null:(e.faces=o,d.forEach(function(e){e.side=h}),new THREE.Mesh((new THREE.BufferGeometry).fromGeometry(e),d))}function buildMinecraftModel(e,t,a,n){if(e.width<64||e.height<32)return null;let r=e.height>=64?1:0,o=t?capeScale(t.height):null,d=makeOpaque(e),i=toCanvas(e),h=hasAlphaLayer(e),s=new THREE.Object3D;s.position.x=0,s.position.y=12,s.position.z=0;let l=new THREE.BoxGeometry(8,8,8,8,8,8),c=colorFaces(l,d,skinLayout[r].head[0]);if(s.add(c),h){let e=colorFaces(l=new THREE.BoxGeometry(9,9,9,8,8,8),i,skinLayout[r].head[1]);e&&s.add(e)}let w=new THREE.Object3D;w.position.x=0,w.position.y=2,w.position.z=0;let m=colorFaces(l=new THREE.BoxGeometry(8+EPSILON,12+EPSILON,4+EPSILON,8,12,4),d,skinLayout[r].torso[0]);if(w.add(m),r>=1&&h){let e=colorFaces(l=new THREE.BoxGeometry(8.5+EPSILON,12.5+EPSILON,4.5+EPSILON,8,12,4),i,skinLayout[r].torso[1]);e&&w.add(e)}let y,x=new THREE.Object3D;if(x.position.x=a?-5.5:-6,x.position.y=6,x.position.z=0,y=a?colorFaces(l=new THREE.BoxGeometry(3,12,4,3,12,4).translate(0,-4,0),d,skinLayout[r].armRS[0]):colorFaces(l=new THREE.BoxGeometry(4,12,4,4,12,4).translate(0,-4,0),d,skinLayout[r].armR[0]),x.add(y),r>=1&&h){let e;(e=a?colorFaces(l=new THREE.BoxGeometry(3.5+4*EPSILON,12.5+4*EPSILON,4.5+4*EPSILON,3,12,4).translate(0,-4,0),i,skinLayout[r].armRS[1]):colorFaces(l=new THREE.BoxGeometry(4.5+4*EPSILON,12.5+4*EPSILON,4.5+4*EPSILON,4,12,4).translate(0,-4,0),i,skinLayout[r].armR[1]))&&x.add(e)}let u,g=new THREE.Object3D;if(g.position.x=a?5.5:6,g.position.y=6,g.position.z=0,u=a?colorFaces(l=new THREE.BoxGeometry(3,12,4,3,12,4).translate(0,-4,0),d,skinLayout[r].armLS[0]):colorFaces(l=new THREE.BoxGeometry(4,12,4,4,12,4).translate(0,-4,0),d,skinLayout[r].armL[0]),g.add(u),r>=1&&h){let e;(e=a?colorFaces(l=new THREE.BoxGeometry(3.5+4*EPSILON,12.5+4*EPSILON,4.5+4*EPSILON,3,12,4).translate(0,-4,0),i,skinLayout[r].armLS[1]):colorFaces(l=new THREE.BoxGeometry(4.5+4*EPSILON,12.5+4*EPSILON,4.5+4*EPSILON,4,12,4).translate(0,-4,0),i,skinLayout[r].armL[1]))&&g.add(e)}let f=new THREE.Object3D;f.position.x=-2,f.position.y=-4,f.position.z=0;let S=colorFaces(l=new THREE.BoxGeometry(4,12,4,4,12,4).translate(0,-6,0),d,skinLayout[r].legR[0]);if(f.add(S),r>=1&&h){let e=colorFaces(l=new THREE.BoxGeometry(4.5+2*EPSILON,12.5+2*EPSILON,4.5+2*EPSILON,4,12,4).translate(0,-6,0),i,skinLayout[r].legR[1]);e&&f.add(e)}let E=new THREE.Object3D;E.position.x=2,E.position.y=-4,E.position.z=0;let p=colorFaces(l=new THREE.BoxGeometry(4,12,4,4,12,4).translate(0,-6,0),d,skinLayout[r].legL[0]);if(E.add(p),r>=1&&h){let e=colorFaces(l=new THREE.BoxGeometry(4.5+3*EPSILON,12.5+3*EPSILON,4.5+3*EPSILON,4,12,4).translate(0,-6,0),i,skinLayout[r].legL[1]);e&&E.add(e)}let v=new THREE.Object3D;if(v.add(s),v.add(w),v.add(x),v.add(g),v.add(f),v.add(E),t){let e,a=makeOpaque(t),n=new THREE.Object3D;n.position.x=0,n.position.y=8,n.position.z=-2,n.rotation.y+=radians(180),e=colorFaces(l=new THREE.BoxGeometry(10,16,1,10*o,16*o,o).translate(0,-8,.5),a,{left:{x:11*o,y:o,w:o,h:16*o},right:{x:0,y:o,w:o,h:16*o},top:{x:o,y:0,w:10*o,h:o},bottom:{x:11*o,y:o-1,w:10*o,h:-o},front:{x:o,y:o,w:10*o,h:16*o},back:{x:12*o,y:o,w:10*o,h:16*o}}),n.add(e),v.add(n)}return n&&(v.rotation.z+=radians(180)),v}let renderState,renderer,renderButton=$("#render-button"),skinButtons=$(".skin-button"),canvas3d=$("canvas.skin-3d");function animateSkin(e,t){renderState.animate="true"===localStorage.getItem("animate"),t&&(renderState.animate=!renderState.animate,localStorage.setItem("animate",renderState.animate.toString())),renderState.animate?(e.children[0].classList.remove("fa-play"),e.children[0].classList.add("fa-pause"),canvas3d.parent().removeClass("animation-paused"),renderState.timestamp=Date.now(),window.requestAnimationFrame(renderAnimation)):(e.children[0].classList.remove("fa-pause"),e.children[0].classList.add("fa-play"),canvas3d.parent().addClass("animation-paused"))}function renderAnimation(){if(renderState.animate){let e=Date.now();renderState.time+=.24*(e-renderState.timestamp),renderState.timestamp=e,render(),window.requestAnimationFrame(renderAnimation)}}function render(){canvas3d.attr("data-time",Math.round(renderState.time)%360),renderButton.attr("href","https://render.namemc.com/skin/3d/body.png?skin="+canvas3d.attr("data-skin-hash")+"&model="+canvas3d.attr("data-model")+"&theta="+canvas3d.attr("data-theta")+"&phi="+canvas3d.attr("data-phi")+"&time="+canvas3d.attr("data-time")+"&width=600&height=800");let e=Math.sin(radians(renderState.time));if(renderState.model.children[2].rotation.x=-radians(18)*e,renderState.model.children[3].rotation.x=radians(18)*e,renderState.model.children[4].rotation.x=radians(20)*e,renderState.model.children[5].rotation.x=-radians(20)*e,renderState.model.children[6]){let e=Math.sin(radians(renderState.time/4));renderState.model.children[6].rotation.x=radians(18)-radians(6)*e}renderState.renderer.render(renderState.scene,renderState.camera),renderState.canvas!==renderState.renderer.domElement&&renderState.canvas.getContext("2d").drawImage(renderState.renderer.domElement,0,0)}function enableRotation(e){function t(t,a){e.dragState[a]={x:t.screenX,y:t.screenY}}function a(t,a){if(!e.dragState[a])return!1;let n=!0;return e.theta+=t.screenX-e.dragState[a].x,e.phi+=t.screenY-e.dragState[a].y,e.canvas.setAttribute("data-theta",(e.theta%360).toString()),e.canvas.setAttribute("data-phi",(e.phi%360).toString()),renderButton.attr("href","https://render.namemc.com/skin/3d/body.png?skin="+canvas3d.attr("data-skin-hash")+"&model="+canvas3d.attr("data-model")+"&theta="+canvas3d.attr("data-theta")+"&phi="+canvas3d.attr("data-phi")+"&time="+canvas3d.attr("data-time")+"&width=600&height=800"),e.phi<-90?(e.phi=-90,n=!1):e.phi>90&&(e.phi=90,n=!1),e.model.rotation.y=radians(e.theta),e.model.rotation.x=radians(e.phi),e.renderer.render(e.scene,e.camera),e.dragState[a].x=t.screenX,e.dragState[a].y=t.screenY,n}function n(t,a){delete e.dragState[a]}e.canvas.onmousedown=function(e){e.preventDefault(),t(e,"mouse")},window.onmousemove=function(e){a(e,"mouse")},window.onmouseup=function(e){n(0,"mouse")},e.canvas.ontouchstart=function(e){for(let a=0;a<e.changedTouches.length;a++)t(e.changedTouches[a],e.changedTouches[a].identifier)},e.canvas.ontouchmove=function(t){let n=!1;for(let r=0;r<t.changedTouches.length;r++)a(t.changedTouches[r],t.changedTouches[r].identifier)?n=!0:delete e.dragState[t.changedTouches[r].identifier];n&&t.preventDefault()},e.canvas.ontouchend=e.canvas.ontouchcancel=function(e){for(let t=0;t<e.changedTouches.length;t++)n(e.changedTouches[t],e.changedTouches[t].identifier)}}function renderSkinHelper(e,t,a,n,r,o){if(renderState)return renderState.canvas=e,renderState.scene.remove(renderState.model),renderState.model=o,renderState.scene.add(o),renderState.animate=t,renderState.model.rotation.y=radians(a),renderState.model.rotation.x=radians(n),void render();renderer||(renderer=new THREE.WebGLRenderer({canvas:e,alpha:!0,antialias:!0})),(renderState={canvas:e,animate:t,model:o,theta:a,phi:n,scene:new THREE.Scene,camera:new THREE.PerspectiveCamera(38,e.width/e.height,40,80),renderer:renderer,dragState:{},time:r}).camera.position.x=0,renderState.camera.position.z=60,renderState.camera.position.y=0,renderState.camera.lookAt(new THREE.Vector3(0,0,0)),renderState.scene.add(o);let d=new THREE.AmbientLight(16777215,.7),i=new THREE.DirectionalLight(16777215,.3);if(i.position.set(.67763,.28571,.67763),renderState.scene.add(d),renderState.scene.add(i),renderState.model.rotation.y=radians(a),renderState.model.rotation.x=radians(n),enableRotation(renderState),render(),renderState.animate)for(let e of document.getElementsByClassName("play-pause-btn"))animateSkin(e)}let modelCache={};function renderSkin(e,t,a,n,r,o,d,i,h,s){let l=[h,i,t,a].join(":");function c(){try{renderSkinHelper(e,n,r,o,d,modelCache[l]),s()}catch(e){s(e)}}if(modelCache[l])c();else{function w(e,n){let r=buildMinecraftModel(e,n,t,a);r?(modelCache[l]=r,c()):s()}let e=new Image;e.crossOrigin="",e.src=textureUrl(i),e.onload=function(){if(h){let t=new Image;t.crossOrigin="",t.src=textureUrl(h),t.onload=function(){w(e,t)},t.onerror=function(){w(e,null),console.error("Error loading "+t.src)}}else w(e,null)},e.onerror=function(){console.error("Error loading "+e.src)}}}function drawFullSkin2D(e){let t=e.classList.contains("cape-3d"),a=e.getAttribute("data-skin-hash"),n=e.getAttribute("data-cape-hash"),r=textureUrl(t?n:a),o="true"===e.getAttribute("data-flip"),d=new Image;d.crossOrigin="",d.src=r,d.onload=function(){let a,n=makeOpaque(d),r=e.getContext("2d");if(r.save(),r.mozImageSmoothingEnabled=!1,r.webkitImageSmoothingEnabled=!1,r.msImageSmoothingEnabled=!1,r.imageSmoothingEnabled=!1,o&&(r.translate(e.width,e.height),r.scale(-1,-1)),r.translate(e.width/2,e.height/2),t)a=Math.min(Math.floor(e.width/10),Math.floor(e.height/16))-1,r.scale(a,a),r.drawImage(n,1,1,10,16,-5,-8,10,16);else{a=Math.min(Math.floor(e.width/16),Math.floor(e.height/32))-1,r.scale(a,a),r.drawImage(n,8,8,8,8,-4,-16,8,8),r.drawImage(n,20,20,8,12,-4,-8,8,12),r.drawImage(n,44,20,4,12,-8,-8,4,12);let t=d.height>=64?1:0;0===t?(r.save(),r.scale(-1,1),r.drawImage(n,44,20,4,12,-8,-8,4,12),r.restore()):r.drawImage(n,36,52,4,12,4,-8,4,12),r.drawImage(n,4,20,4,12,-4,4,4,12),0===t?(r.save(),r.scale(-1,1),r.drawImage(n,4,20,4,12,-4,4,4,12),r.restore()):r.drawImage(n,20,52,4,12,0,4,4,12),hasAlphaLayer(d)&&(r.drawImage(d,40,8,8,8,-4,-16,8,8),t>=1&&(r.drawImage(d,20,36,8,12,-4,-8,8,12),r.drawImage(d,44,36,4,12,-8,-8,4,12),r.drawImage(d,52,52,4,12,4,-8,4,12),r.drawImage(d,4,36,4,12,-4,4,4,12),r.drawImage(d,4,52,4,12,0,4,4,12)))}r.restore()},d.onerror=function(){console.error("Error loading "+d.src)}}function drawSkin3D(){if(!canvas3d.get(0))return;let e="slim"===canvas3d.attr("data-model"),t=canvas3d.attr("data-skin-hash"),a=canvas3d.attr("data-cape-hash"),n="true"===canvas3d.attr("data-flip"),r="true"===localStorage.getItem("animate"),o=canvas3d.attr("data-theta")?parseFloat(canvas3d.attr("data-theta")):30,d=canvas3d.attr("data-phi")?parseFloat(canvas3d.attr("data-phi")):21,i=canvas3d.attr("data-time")?parseFloat(canvas3d.attr("data-time")):90;canvas3d.attr("data-model",e?"slim":"classic"),canvas3d.attr("data-theta",o),canvas3d.attr("data-phi",d),canvas3d.attr("data-time",i),renderSkin(canvas3d.get(0),e,n,r,o,d,i,t,a,function(e){e&&($(".play-pause-btn").remove(),drawFullSkin2D(canvas3d.get(0)))})}function updateSkin(e){let t=e.getAttribute("data-skin-hash"),a=e.getAttribute("data-cape-hash"),n=e.getAttribute("data-model"),r=!1;return t&&canvas3d.attr("data-skin-hash")!==t&&(canvas3d.attr("data-skin-hash",t),r=!0),a&&canvas3d.attr("data-cape-hash")!==a&&(canvas3d.attr("data-cape-hash",a),r=!0),n&&canvas3d.attr("data-model")!==n&&(canvas3d.attr("data-model",n),r=!0),r&&(drawSkin3D(),skinButtons.each(function(e,t){$(t).toggleClass("skin-button-selected",$(t).attr("data-skin-hash")===canvas3d.attr("data-skin-hash")||$(t).attr("data-cape-hash")===canvas3d.attr("data-cape-hash"))})),!1}skinButtons.each(function(e,t){"onpointermove"in t?t.onpointermove=function(){updateSkin(t)}:"onmousemove"in t&&(t.onmousemove=function(){updateSkin(t)})}),drawSkin3D(),drawSkin2D();